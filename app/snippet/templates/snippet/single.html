{% extends "snippet/_base.html" %}
{% load staticfiles %}


{% block main %}
  <h4 id="snippet-author">Posted by: {{ object.author.username }} on {{ object.date_added_raw|date:"SHORT_DATETIME_FORMAT" }}</h4>
	{% include "snippet/_editor.html" %}
{% endblock %}


{% block scriptsbottom %}
  <script type="text/javascript" src="{% static 'snippet/js/_editor.js' %}"></script>  
	
	{# Disable certain fields if you are viewing a Snippet #}
	{% if viewingSnippet %}
	<script type="text/javascript">
		// Disable Bootstrap toggle switch, and Token Fields
		$(document).ready(function() {
			
			// Disable Tokenfield.
			$("#snippet-tags-tokenfield").prop("disabled", true);
			$("#snippet-tags-tokenfield").prop("placeholder", "");
			$("#snippet-tags").tokenfield('readonly');
			
			// Disable Snippet title.
			$("#snippet-title").prop("disabled", true);
			
			// Disable snippet language.
			$('#snippet-language').prop('disabled', true).trigger("chosen:updated");
			
		});
	</script>
	{% endif %}
	
	
	{# If viewing, give the editor the Snippet language. #}
	{% if viewingSnippet %}
	  <script type="text/javascript">
			$(document).ready(function() {
				// Change the snippet-language select field.
				$("#snippet-language").val($("#hidden-snippet-language").data("hidden-snippet-language"));
				// Update the 'Chosen' plugin.
				$("#snippet-language").trigger("chosen:updated");
				// Trigger 'change' event to for the Snippet Editor's listeners to hook into.
				$("#snippet-language").trigger("change");
			});
		</script>
	{% endif %}
	
	
	{# If you are logged in and you are viewing a Snippet, you have the option to 'like' it. #}
	{% if user and not user.is_anonymous and viewingSnippet %}
		<script type="text/javascript" src="{% static 'snippet/js/singleSnippet.js' %}"></script>
		{% csrf_token %}
		<input id="snUrl" type="hidden" data-snippeturl="{{ object.url_code }}">
		
		{% if alreadyLiked %}
			<a id="likeButton" href="#">You Liked</a>
		{% else %}
			<a id="likeButton" href="#">Like</a>
		{% endif %}
		
	{% else %}
		<p id="likeButtonL">Like</p>
	{% endif %}

{% endblock %}

